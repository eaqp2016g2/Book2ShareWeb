<div ng-controller="libCtrl" layout="column">

    <md-content>
        <md-list flex>
            <md-subheader class="md-no-sticky">La biblioteca</md-subheader>
            <md-button md-no-ink class="md-primary" ng-click="campo=title" ng-model="campo" value="title">Nom</md-button>
            <md-button md-no-ink class="md-primary" ng-click="campo=year" ng-model="campo" value="year">Any de publicació</md-button>
            <md-list-item class="md-3-line" ng-repeat="book in books2 | orderBy:'title'" ng-click="searchBook(book)">
                <img src="../../img/kthesaurus.svg" class="md-avatar"/>
                <div class="md-list-item-text" layout="column">
                    <h3>{{ book.title }}</h3>
                    <h4>{{ book.author[0] }}</h4>
                    <p>{{ book.language }}</p>
                </div>
                <p>{{book.year}}</p>
                <p>{{book.editorial}}</p>
                Gènere:<p ng-repeat="gen in book.genre">{{gen}}</p>
                <div class="md-list-item-text" layout="column">
                    <h4 ng-repeat="user in users | where:{_id: book.propietary}">Propietari: {{user.name}}</h4>
                    <h4 ng-repeat="point in points | where:{_id: book.point}">Punt: {{point.name}}</h4>
                </div>
                <md-button ng-disabled="book.propietary === userdata._id" ng-show="!book.favorite" class="md-fab md-primary md-hue-2" ng-click="markFavorite(book)" aria-label="Favorite">
                    <md-icon md-svg-icon="../../img/ic_favorite_24px.svg" style="color: white"></md-icon>
                </md-button>
                <md-button ng-disabled="book.propietary === userdata._id" ng-show="book.favorite" class="md-fab md-primary md-hue-2" ng-click="unmarkFavorite(book)" aria-label="Favorite">
                    <md-icon md-svg-icon="../../img/ic_favorite_24px.svg" style="color: red"></md-icon>
                </md-button>
                <md-button ng-disabled="book.propietary === userdata._id" class="md-fab md-primary md-hue-2" ng-click="openChat($event,book.propietary)" aria-label="Chat">
                    <md-icon md-svg-icon="../../img/ic_comment_24px.svg" style="color: white"></md-icon>
                </md-button>
            </md-list-item>
        </md-list>
    </md-content>
</div>